<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ASTERRA Architecture</title>
</head>
<body style="margin:0; background:#f8fafc;">
  <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="awsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9900;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF6600;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vpcGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F4FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#B3D9FF;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">
    ASTERRA DevOps Assignment - Architecture Overview
  </text>

  <!-- Internet -->
  <ellipse cx="100" cy="150" rx="60" ry="30" fill="#34d399" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
  <text x="100" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Internet</text>

  <!-- AWS Cloud Container -->
  <rect x="200" y="80" width="950" height="680" rx="15" fill="url(#awsGradient)" opacity="0.1" stroke="#FF9900" stroke-width="3"/>
  <text x="220" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FF9900">AWS Cloud</text>

  <!-- VPC Container -->
  <rect x="240" y="130" width="870" height="590" rx="10" fill="url(#vpcGradient)" stroke="#3b82f6" stroke-width="2"/>
  <text x="260" y="155" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e40af">VPC (10.0.0.0/16)</text>

  <!-- Public Subnet -->
  <rect x="270" y="180" width="380" height="180" rx="5" fill="#dcfdf4" stroke="#10b981" stroke-width="2"/>
  <text x="290" y="200" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#065f46">Public Subnet (10.0.1.0/24)</text>

  <!-- ALB -->
  <rect x="290" y="220" width="80" height="40" rx="5" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" filter="url(#shadow)"/>
  <text x="330" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">ALB</text>
  <text x="330" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Load Balancer</text>

  <!-- Auto Scaling Group -->
  <rect x="390" y="220" width="120" height="40" rx="5" fill="#3b82f6" stroke="#2563eb" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Auto Scaling Group</text>
  <text x="450" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">EC2 Instances</text>

  <!-- NAT Gateway -->
  <rect x="530" y="220" width="80" height="40" rx="5" fill="#f59e0b" stroke="#d97706" stroke-width="2" filter="url(#shadow)"/>
  <text x="570" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">NAT</text>
  <text x="570" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Gateway</text>

  <!-- Windows Workspace -->
  <rect x="290" y="280" width="100" height="60" rx="5" fill="#dc2626" stroke="#b91c1c" stroke-width="2" filter="url(#shadow)"/>
  <text x="340" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Windows</text>
  <text x="340" y="313" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Workspace</text>
  <text x="340" y="326" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">RDP :3389</text>

  <!-- Private Subnet -->
  <rect x="700" y="180" width="380" height="250" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="720" y="200" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#92400e">Private Subnet (10.0.2.0/24)</text>

  <!-- ECS Cluster -->
  <rect x="720" y="220" width="120" height="60" rx="5" fill="#ec4899" stroke="#db2777" stroke-width="2" filter="url(#shadow)"/>
  <text x="780" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">ECS Cluster</text>
  <text x="780" y="253" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">(Fargate)</text>
  <text x="780" y="266" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">GeoJSON Processor</text>

  <!-- Lambda -->
  <rect x="720" y="300" width="80" height="40" rx="5" fill="#f97316" stroke="#ea580c" stroke-width="2" filter="url(#shadow)"/>
  <text x="760" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Lambda</text>
  <text x="760" y="328" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">S3 Trigger</text>

  <!-- Private EC2 -->
  <rect x="860" y="220" width="80" height="60" rx="5" fill="#6366f1" stroke="#4f46e5" stroke-width="2" filter="url(#shadow)"/>
  <text x="900" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Private</text>
  <text x="900" y="253" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">EC2</text>
  <text x="900" y="266" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Processing</text>

  <!-- Database Subnet -->
  <rect x="270" y="460" width="810" height="120" rx="5" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
  <text x="290" y="480" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#991b1b">Database Subnet (10.0.3.0/24)</text>

  <!-- RDS PostgreSQL -->
  <rect x="400" y="500" width="120" height="60" rx="5" fill="#0891b2" stroke="#0e7490" stroke-width="2" filter="url(#shadow)"/>
  <text x="460" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">RDS PostgreSQL</text>
  <text x="460" y="533" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">with PostGIS</text>
  <text x="460" y="546" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Multi-AZ</text>

  <!-- Secrets Manager -->
  <rect x="680" y="500" width="100" height="60" rx="5" fill="#7c3aed" stroke="#6d28d9" stroke-width="2" filter="url(#shadow)"/>
  <text x="730" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Secrets</text>
  <text x="730" y="533" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Manager</text>
  <text x="730" y="546" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">DB Credentials</text>

  <!-- S3 Services -->
  <rect x="270" y="600" width="810" height="100" rx="5" fill="#e0f2fe" stroke="#0284c7" stroke-width="2"/>
  <text x="290" y="620" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0369a1">S3 Storage Services</text>

  <!-- S3 Buckets -->
  <rect x="300" y="640" width="120" height="40" rx="5" fill="#0284c7" stroke="#0369a1" stroke-width="2" filter="url(#shadow)"/>
  <text x="360" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Data Ingestion</text>
  <text x="360" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GeoJSON Upload</text>

  <rect x="440" y="640" width="120" height="40" rx="5" fill="#0284c7" stroke="#0369a1" stroke-width="2" filter="url(#shadow)"/>
  <text x="500" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Public Docs</text>
  <text x="500" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Website Hosting</text>

  <rect x="580" y="640" width="120" height="40" rx="5" fill="#0284c7" stroke="#0369a1" stroke-width="2" filter="url(#shadow)"/>
  <text x="640" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Terraform State</text>
  <text x="640" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Remote Backend</text>

  <!-- ECR -->
  <rect x="720" y="640" width="80" height="40" rx="5" fill="#f59e0b" stroke="#d97706" stroke-width="2" filter="url(#shadow)"/>
  <text x="760" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">ECR</text>
  <text x="760" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Container Registry</text>

  <!-- CloudWatch -->
  <rect x="820" y="640" width="80" height="40" rx="5" fill="#10b981" stroke="#059669" stroke-width="2" filter="url(#shadow)"/>
  <text x="860" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">CloudWatch</text>
  <text x="860" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Monitoring</text>

  <!-- GitHub Actions -->
  <rect x="920" y="640" width="100" height="40" rx="5" fill="#6b7280" stroke="#4b5563" stroke-width="2" filter="url(#shadow)"/>
  <text x="970" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">GitHub Actions</text>
  <text x="970" y="668" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">CI/CD Pipeline</text>

  <!-- Flow Arrows -->
  <!-- Internet to ALB -->
  <path d="M 160 150 Q 200 150 290 220" stroke="#2563eb" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- ALB to ASG -->
  <path d="M 370 240 L 390 240" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- ASG to ECS (through private subnet) -->
  <path d="M 510 240 Q 600 240 720 250" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Lambda to ECS -->
  <path d="M 760 300 L 780 280" stroke="#f97316" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- S3 to Lambda -->
  <path d="M 360 640 Q 360 400 720 320" stroke="#0284c7" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- ECS to RDS -->
  <path d="M 780 280 Q 780 400 520 500" stroke="#ec4899" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Secrets Manager to RDS -->
  <path d="M 680 530 L 520 530" stroke="#7c3aed" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2563eb"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="50" y="600" width="180" height="150" rx="5" fill="white" stroke="#6b7280" stroke-width="1" filter="url(#shadow)"/>
  <text x="60" y="620" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1f2937">Legend</text>

  <rect x="60" y="630" width="15" height="10" fill="#dcfdf4" stroke="#10b981"/>
  <text x="80" y="639" font-family="Arial, sans-serif" font-size="9" fill="#1f2937">Public Subnet</text>

  <rect x="60" y="645" width="15" height="10" fill="#fef3c7" stroke="#f59e0b"/>
  <text x="80" y="654" font-family="Arial, sans-serif" font-size="9" fill="#1f2937">Private Subnet</text>

  <rect x="60" y="660" width="15" height="10" fill="#fee2e2" stroke="#dc2626"/>
  <text x="80" y="669" font-family="Arial, sans-serif" font-size="9" fill="#1f2937">Database Subnet</text>

  <rect x="60" y="675" width="15" height="10" fill="#e0f2fe" stroke="#0284c7"/>
  <text x="80" y="684" font-family="Arial, sans-serif" font-size="9" fill="#1f2937">S3 Services</text>

  <path d="M 60 695 L 75 695" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="80" y="699" font-family="Arial, sans-serif" font-size="9" fill="#1f2937">Data Flow</text>

  <!-- Key Features -->
  <text x="60" y="720" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1f2937">Key Features:</text>
  <text x="60" y="735" font-family="Arial, sans-serif" font-size="8" fill="#1f2937">• Auto-scaling with ALB health checks</text>
  <text x="60" y="745" font-family="Arial, sans-serif" font-size="8" fill="#1f2937">• Event-driven GeoJSON processing</text>
</svg>
</body>
</html>
